# Gavinho Project Manager - TODO

## Modelo de Dados e Schema
- [x] Definir tabelas de projetos com status, prazos e progresso
- [x] Criar tabela de mapas de quantidades com planejado vs executado
- [x] Definir tabela de e-mails integrados do Outlook
- [x] Criar tabela de encomendas e compras
- [x] Definir tabela de fornecedores com histórico e avaliação
- [x] Criar tabela de tarefas com prioridades e matriz urgência/importância
- [x] Definir tabela de orçamentos com alertas de desvios
- [x] Criar tabela de notificações
- [x] Definir tabela de relatórios e exportações

## Design System e Interface
- [x] Implementar design elegante e sofisticado com paleta de cores profissional
- [x] Configurar tema e tipografia no index.css
- [x] Criar componentes customizados para dashboard
- [x] Implementar layout responsivo com sidebar navigation

## Dashboard Executivo
- [x] Criar visão geral de todos os projetos
- [x] Implementar cards de status de projetos
- [x] Adicionar gráficos de progresso
- [x] Mostrar alertas de prazos e projetos atrasados
- [ ] Implementar filtros e busca de projetos

## Gestão de Projetos
- [x] Criar página de listagem de projetos
- [x] Implementar formulário de criação de projeto
- [x] Adicionar página de detalhes do projeto
- [x] Implementar edição e exclusão de projetos
- [ ] Adicionar timeline e marcos do projeto

## Importação e Análise de Mapas de Quantidades
- [ ] Implementar importação de Google Sheets
- [ ] Implementar importação de Excel
- [ ] Criar visualização de mapas de quantidades
- [ ] Implementar comparação planejado vs executado
- [ ] Adicionar alertas para discrepâncias

## Integração com Outlook
- [ ] Implementar autenticação Microsoft Graph API
- [ ] Criar sincronização de e-mails
- [ ] Implementar classificação automática de e-mails
- [ ] Adicionar busca avançada de e-mails por projeto
- [ ] Criar visualização de histórico de comunicações

## Rastreamento de Encomendas e Compras
- [ ] Criar formulário de registro de encomendas
- [ ] Implementar acompanhamento de status de entrega
- [ ] Adicionar histórico de compras por projeto
- [ ] Criar visualização de custos acumulados

## Gestão de Fornecedores
- [ ] Criar cadastro de fornecedores
- [ ] Implementar histórico de transações
- [ ] Adicionar sistema de avaliação de desempenho
- [ ] Criar relatório de fornecedores

## Sistema de Prioridades
- [ ] Implementar matriz de urgência/importância
- [ ] Criar visualização Kanban
- [ ] Adicionar drag-and-drop para tarefas
- [ ] Implementar atribuição de responsáveis

## Sugestões Inteligentes de IA
- [ ] Integrar OpenAI API para análise de projetos
- [ ] Implementar detecção de projetos atrasados
- [ ] Criar sugestões automáticas de próximas ações
- [ ] Adicionar recomendações de comunicação com fornecedores

## Gestão de Orçamentos
- [ ] Criar formulário de orçamento por projeto
- [ ] Implementar rastreamento de custos reais
- [ ] Adicionar comparação orçado vs realizado
- [ ] Criar alertas de desvios orçamentários
- [ ] Implementar gráficos de evolução de custos

## Sistema de Notificações
- [ ] Implementar notificações de projetos atrasados
- [ ] Adicionar alertas de prazos próximos
- [ ] Criar notificações de encomendas recebidas
- [ ] Implementar lembretes de ações pendentes
- [ ] Adicionar preferências de notificação

## Relatórios e Análises
- [ ] Criar relatórios de progresso de projetos
- [ ] Implementar análise de tendências
- [ ] Adicionar exportação em PDF
- [ ] Adicionar exportação em Excel
- [ ] Criar dashboard de análise de custos
- [ ] Implementar relatórios customizáveis

## Testes e Qualidade
- [x] Escrever testes unitários para procedures críticos
- [ ] Testar fluxos de importação de dados
- [ ] Validar integrações externas
- [ ] Testar responsividade em diferentes dispositivos
- [ ] Validar performance com grande volume de dados

## Integração Microsoft Outlook
- [x] Configurar autenticação Microsoft Graph API
- [x] Implementar sincronização de e-mails do Outlook
- [x] Criar sistema de classificação automática de e-mails (IA)
- [x] Desenvolver interface de visualização de e-mails
- [x] Implementar busca e filtros de e-mails
- [x] Adicionar atribuição de e-mails a projetos
- [x] Criar estatísticas de e-mails por categoria
## Sistema de Sugestões de IA
- [x] Definir tabela de sugestões de IA no schema
- [x] Criar serviço de análise de IA com OpenAI
- [x] Implementar identificação de projetos em risco
- [x] Desenvolver análise de gargalos e atrasos
- [x] Criar sistema de otimização de alocação de recursos
- [x] Implementar sugestões de próximas ações
- [x] Desenvolver análise de padrões históricos
- [x] Criar interface de visualização de sugestões
- [x] Implementar dashboard de riscos
- [x] Adicionar sistema de aceitação/rejeição de sugestões
- [x] Criar testes unitários para sistema de IA

## Módulo de Relatórios Avançados
- [x] Definir tipos de relatórios (progresso, orçamento, recursos, timeline)
- [x] Criar serviço de geração de dados para relatórios
- [x] Implementar análise de tendências e comparações
- [x] Desenvolver geração de gráficos com Recharts
- [x] Implementar exportação para PDF
- [x] Implementar exportação para Excel
- [x] Criar interface de visualização de relatórios
- [x] Adicionar filtros por período e projeto
- [x] Implementar relatórios personalizáveis
- [x] Criar testes unitários para relatórios

## Sistema de Notificações em Tempo Real
- [x] Definir tabela de notificações no schema
- [x] Criar tabela de preferências de notificação por usuário
- [x] Implementar serviço de geração automática de notificações
- [x] Desenvolver monitoramento de alertas críticos de IA
- [x] Implementar monitoramento de prazos próximos
- [x] Criar monitoramento de orçamentos excedidos
- [x] Desenvolver sistema de preferências de notificação
- [x] Criar interface de visualização de notificações
- [x] Implementar painel de configuração de preferências
- [x] Adicionar histórico completo de notificações
- [x] Implementar marcação de lido/não lido
- [x] Criar testes unitários para notificações

## Integração com Google Calendar e Outlook Calendar
- [ ] Configurar autenticação OAuth para Google Calendar
- [ ] Configurar autenticação OAuth para Microsoft Calendar
- [ ] Implementar serviço de sincronização de eventos
- [ ] Criar mapeamento de projetos/tarefas para eventos de calendário
- [ ] Desenvolver sincronização bidirecional (criar, atualizar, deletar)
- [ ] Implementar visualização de calendário na interface
- [ ] Adicionar filtros por projeto, tipo de evento e status
- [ ] Criar sistema de lembretes automáticos por e-mail
- [ ] Implementar configurações de sincronização por usuário
- [x] Adicionar testes unitários para integração de calendários

## Dashboard Avançado de Fornecedores
- [x] Expandir tabela de fornecedores com campos de avaliação
- [x] Criar tabela de transações de fornecedores
- [x] Criar tabela de avaliações de fornecedores
- [x] Implementar serviço de cálculo de KPIs (pontualidade, qualidade, preço médio)
- [x] Desenvolver análise de desempenho por fornecedor
- [x] Criar sistema de ranking de fornecedores
- [x] Implementar dashboard visual com gráficos de desempenho
- [x] Adicionar histórico completo de transações
- [x] Criar sistema de avaliação de fornecedores
- [x] Implementar comparação entre fornecedores
- [x] Adicionar filtros e busca avançada
- [x] Criar testes unitários para dashboard de fornecedores

## Sistema de Análise Preditiva com IA
- [x] Criar tabela de predições no schema
- [x] Implementar serviço de análise preditiva com OpenAI
- [x] Desenvolver algoritmo de previsão de atrasos baseado em histórico
- [x] Criar sistema de estimativa de custos finais
- [x] Implementar análise de padrões históricos de projetos similares
- [x] Desenvolver sistema de recomendações de ajustes no cronograma
- [x] Criar cálculo de probabilidade de atraso
- [x] Implementar análise de fatores de risco (orçamento, recursos, complexidade)
- [x] Desenvolver dashboard de predições com visualizações
- [x] Criar interface de visualização de tendências e projeções
- [x] Implementar alertas de risco alto
- [ ] Adicionar testes unitários para sistema preditivo

## Sistema de Simulação What-If
- [x] Criar tabela de cenários de simulação no schema
- [x] Definir parâmetros ajustáveis (orçamento, equipe, prazos, recursos)
- [x] Implementar serviço de simulação what-if com IA
- [x] Desenvolver cálculo de impacto em prazos
- [x] Criar cálculo de impacto em custos
- [x] Implementar análise de viabilidade de cenários
- [x] Desenvolver comparação lado a lado de múltiplos cenários
- [x] Criar visualizações de impacto (gráficos comparativos)
- [x] Implementar interface interativa com sliders e inputs
- [x] Adicionar salvamento de cenários favoritos
- [x] Criar exportação de análise de cenários
- [x] Adicionar testes unitários para simulações

## Integração de Análise Preditiva com What-If
- [x] Expandir schema de cenários com probabilidade de sucesso
- [x] Adicionar campos de fatores críticos e análise de risco
- [x] Implementar cálculo de probabilidade de sucesso com IA
- [x] Desenvolver análise de fatores críticos por cenário
- [x] Criar sistema de pontuação de risco integrado
- [x] Integrar predições aos resultados de simulação
- [x] Atualizar interface com visualização de probabilidades
- [x] Adicionar gráficos de distribuição de risco
- [x] Implementar comparação de probabilidades entre cenários
- [x] Criar recomendações de mitigação baseadas em probabilidade
- [x] Adicionar testes unitários para integração

## Sistema de Compartilhamento de Cenários What-If
- [x] Criar tabela de compartilhamentos no schema
- [x] Adicionar tabela de comentários de cenários
- [x] Definir níveis de permissão (visualizar, editar, admin)
- [x] Implementar serviço de compartilhamento de cenários
- [x] Desenvolver sistema de convites para membros da equipe
- [x] Criar sistema de comentários e discussões
- [x] Implementar notificações de compartilhamento
- [x] Desenvolver interface de gestão de favoritos
- [x] Criar modal de compartilhamento com seleção de usuários
- [x] Implementar lista de cenários compartilhados comigo
- [x] Adicionar histórico de alterações em cenários compartilhados
- [x] Criar testes unitários para compartilhamento

## Feed de Atividades Recentes
- [x] Criar tabela de atividades no schema
- [x] Definir tipos de atividades (comentário, compartilhamento, edição, criação)
- [x] Implementar serviço de rastreamento automático de atividades
- [x] Desenvolver sistema de agregação de atividades por usuário
- [x] Criar sistema de filtragem por tipo e data
- [x] Implementar timeline visual de atividades
- [x] Adicionar integração com notificações
- [x] Desenvolver interface de feed com cards de atividades
- [x] Implementar paginação e carregamento incremental
- [x] Adicionar links diretos para cenários mencionados
- [x] Criar testes unitários para feed de atividades

## Sistema de Threads de Discussão
- [x] Expandir schema de comentários com parentCommentId para threads
- [x] Adicionar campo de contagem de respostas
- [x] Implementar serviço de gerenciamento de threads aninhadas
- [x] Desenvolver carregamento recursivo de threads
- [x] Criar interface de visualização hierárquica de comentários
- [x] Implementar botão "Responder" em cada comentário
- [x] Adicionar indicadores visuais de nível de aninhamento
- [x] Criar notificações automáticas quando alguém responde
- [x] Implementar colapsar/expandir threads
- [x] Adicionar testes unitários para sistema de threads

## Sistema de @Menções em Comentários
- [x] Criar tabela de menções no schema do banco de dados
- [x] Implementar serviço de parsing de menções (@username)
- [x] Criar router tRPC para buscar usuários disponíveis
- [x] Desenvolver componente de input com autocompletar
- [x] Implementar destaque visual de menções no texto
- [x] Criar notificações automáticas para usuários mencionados
- [x] Adicionar lista de usuários mencionados em cada comentário
- [x] Implementar testes unitários para sistema de menções

## Página de Visualização de Menções
- [x] Criar página Mentions.tsx com lista de menções recebidas
- [x] Implementar filtros de lidas/não lidas
- [x] Adicionar informações contextuais (autor, comentário, cenário)
- [x] Implementar ação de marcar como lido
- [x] Adicionar navegação para o cenário mencionado
- [x] Adicionar rota no App.tsx
- [x] Adicionar link na navegação do DashboardLayout
- [x] Adicionar badge de contagem de menções não lidas no menu

## Ação em Massa para Marcar Menções como Lidas
- [x] Adicionar endpoint tRPC markAllMentionsAsRead
- [x] Adicionar botão "Marcar todas como lidas" na página de Menções
- [x] Implementar confirmação antes de executar ação em massa
- [x] Adicionar feedback visual (toast) após marcar todas
- [x] Atualizar contadores e lista após ação

## Identidade Visual GAVINHO
- [x] Atualizar paleta de cores no index.css (Sandy Beach, Blush, Brown, Gold)
- [x] Adicionar tipografia Cormorant Garamond para títulos
- [x] Ajustar componentes para estilo minimalista/editorial
- [x] Atualizar DashboardLayout com novo design
- [ ] Atualizar cards de alertas e menções
- [ ] Testar responsividade em mobile

## Correção de Erro - Tabela Notifications
- [x] Criar tabela notifications no banco de dados
- [x] Verificar schema da tabela no drizzle/schema.ts
- [x] Testar query de notificações não lidas

## Correção de Tipo Boolean em Notifications
- [x] Encontrar query que usa isRead = 0 ao invés de false
- [x] Corrigir para usar boolean corretamente
- [x] Testar query de notificações não lidas

## Correção de Incompatibilidade Boolean/TINYINT
- [x] Verificar tipo real da coluna isRead no banco (TINYINT vs BOOLEAN)
- [x] Reverter queries para usar 0/1 ao invés de false/true
- [x] Atualizar schema Drizzle para usar int ao invés de boolean
- [x] Testar query de notificações não lidas

## Módulo de Projetos - Fase 1
- [x] Criar schema do banco de dados (projects, project_phases, project_milestones)
- [x] Aplicar migrations no banco de dados
- [ ] Criar backend APIs (tRPC) para CRUD de projetos
- [ ] Criar backend APIs para gestão de fases e milestones
- [ ] Criar página de lista de projetos com filtros
- [ ] Criar ficha completa do projeto com todas as informações
- [ ] Criar componente de timeline visual (Gantt simplificado)
- [ ] Criar componente de gestão de fases configuráveis
- [ ] Adicionar galeria de imagens do projeto
- [ ] Testar funcionalidade completa

## Ficha Completa de Projeto
- [x] Atualizar schema Drizzle com definições de projects, phases e milestones
- [x] Criar server/projectsDb.ts com funções de acesso ao banco
- [x] Criar backend APIs (tRPC) para CRUD de projetos
- [x] Criar página Projects.tsx com lista e filtros
- [x] Criar página ProjectDetails.tsx com tabs
- [x] Implementar tab Overview (briefing, objetivos, KPIs)
- [x] Implementar tab Timeline com fases e milestones
- [x] Implementar tab Equipa com membros e fun- [x] Implementar tab Documentos com upload de PDFs
- [x] Implementar tab Galeria com upload de imagensentar tab Financeiro com orçamento vs real
- [ ] Criar componente ProjectTimeline.tsx (Gantt visual)
- [x] Adicionar rota no App.tsx
- [ ] Adicionar link no DashboardLayout
- [ ] Testar CRUD completo


## Tab Equipa - Implementação
- [x] Criar interface de gestão de equipa com cards de membros
- [x] Implementar formulário de adicionar membro com seleção de função
- [x] Adicionar funções predefinidas (Arquiteto, Engenheiro, Gestor, Empreiteiro, Designer, Consultor)
- [x] Implementar remoção de membros
- [x] Criar visualização de responsabilidades por fase
- [x] Adicionar filtros por função
- [x] Aplicar design GAVINHO
- [x] Testar CRUD completo de equipa


## Drag & Drop para Reordenar Membros da Equipa
- [x] Adicionar campo displayOrder à tabela projectTeam
- [x] Instalar biblioteca @hello-pangea/dnd (fork mantido do react-beautiful-dnd)
- [x] Implementar DragDropContext no Tab Equipa
- [x] Adicionar Droppable e Draggable aos cards de membros
- [x] Criar API tRPC para atualizar ordem dos membros
- [x] Implementar lógica de reordenação no frontend
- [x] Adicionar feedback visual durante arrasto
- [x] Testar funcionalidade completa


## Tab Documentos - Implementação
- [x] Criar interface de upload de documentos com drag & drop
- [x] Implementar upload para S3 via storagePut
- [x] Adicionar categorias (Contratos, Plantas, Licenças, Faturas)
- [x] Criar preview inline de PDFs com iframe
- [x] Implementar download de documentos
- [x] Adicionar filtros por categoria e data
- [x] Criar lista de documentos com cards elegantes
- [x] Aplicar design GAVINHO
- [x] Testar upload e download completo

## Tab Galeria - Implementação
- [x] Instalar biblioteca react-image-lightbox ou similar
- [x] Criar interface de upload múltiplo de imagens
- [x] Implementar upload para S3 via storagePut
- [x] Organizar imagens por fase do projeto
- [x] Criar grid responsivo com lazy loading
- [x] Implementar lightbox para visualização ampliada
- [x] Adicionar legendas e datas às imagens
- [x] Aplicar design GAVINHO com hover effects
- [x] Testar upload múltiplo e lightbox


## Modal Novo Projeto - Implementação
- [x] Criar componente NewProjectModal.tsx
- [x] Adicionar formulário com todos os campos (nome, cliente, localização, datas, orçamento, prioridade, status, descrição)
- [x] Implementar validação de campos obrigatórios
- [x] Adicionar validação de datas (fim > início)
- [x] Adicionar validação de orçamento (valor positivo)
- [x] Integrar com API tRPC projects.create
- [x] Implementar redirecionamento automático para ficha do projeto
- [x] Adicionar loading states e toast notifications
- [x] Substituir botão "+ Novo Projeto" no Dashboard e Projects
- [x] Aplicar design GAVINHO
- [x] Testar fluxo completo de criação


## Seed de Projetos GAVINHO Reais
- [x] Criar script seed-gavinho-projects.mjs com 15 projetos reais
- [x] Adicionar informações realistas (clientes, localizações, datas, orçamentos)
- [x] Executar script para popular banco de dados
- [x] Verificar dados no dashboard


## Seed de Fases GAVINHO Reais
- [x] Analisar PDF com checklist de fases de projeto tipo
- [x] Criar script seed-gavinho-phases.mjs com 3 fases principais
- [x] Adicionar subfases/marcos realistas para cada fase
- [x] Executar script para popular fases nos 17 projetos
- [x] Verificar Timeline com fases no frontend


## Atualização Projeto GA00469_MYRIAD com Dados Reais
- [x] Extrair fases, entregáveis e prazos do PDF 469_MYRIAD_ESCOPO
- [x] Documentar condições de pagamento (8 fases de pagamento)
- [x] Criar script update-myriad-project.mjs com dados reais
- [x] Atualizar fases do projeto com prazos corretos (8 fases, 470 dias úteis)
- [x] Adicionar marcos detalhados por fase (29 marcos totais)
- [x] Verificar atualização no Tab Timeline


## Popular Documentos do Projeto MYRIAD
- [x] Criar script seed-myriad-documents.mjs
- [x] Adicionar documentos da Fase 1 - Estudo Prévio (7 documentos: moodboards, layouts, 4 renders 3D)
- [x] Adicionar documentos da Fase 2 - Projeto Base (10 documentos: plantas, desenhos técnicos, 5 renders 3D)
- [x] Adicionar documentos da Fase 3.1 - Obra Acabamentos (9 documentos: mapas, cadernos de encargos, pormenorização)
- [x] Adicionar documentos da Fase 3.2 - Decoração e Mobiliário (7 documentos: FF&E, renders promocionais)
- [x] Adicionar documentos da Fase 3.3 - Bom Para Construção (6 documentos: compatibilização, modelo BIM)
- [x] Executar script e verificar Tab Documentos (39 documentos totais)


## Reestruturação de Tabs da Ficha de Projeto
- [x] Renomear "Overview" para "Dashboard"
- [x] Renomear "Timeline" para "Fases & Entregas" e criar 3 sub-tabs (Fases, Entregáveis, Central de Entregas)
- [x] Renomear "Documentos" para "Design Review"
- [x] Renomear "Galeria" para "Briefing" e criar 2 sub-tabs (Galeria, Memória Conceptual)
- [x] Criar tab "Archiviz" (novo)
- [x] Manter tab "Equipa" como está
- [x] Manter tab "Financeiro" (placeholder)
- [x] Atualizar navegação e ordem dos tabs
- [x] Testar navegação completa


## Central de Entregas - Implementação
- [x] Criar tabela projectDeliveries no schema
- [x] Criar tabela deliveryApprovals para histórico de aprovações
- [x] Implementar APIs tRPC para CRUD de entregas
- [x] Implementar APIs tRPC para aprovações/rejeições
- [x] Criar componente DeliveryTimeline com visualização de próximas entregas
- [x] Implementar upload de documentos de entrega
- [x] Criar sistema de notificações automáticas (3 dias antes)
- [x] Implementar filtros por status, fase e tipo
- [x] Criar dashboard de métricas (no prazo, atrasadas, aprovadas)
- [x] Adicionar histórico de aprovações/rejeições com comentários
- [x] Aplicar design GAVINHO
- [x] Testar fluxo completo de entrega e aprovação


## Módulo de Obras (GB) - Implementação
- [x] Analisar estrutura completa do MQT (26 páginas do PDF GA00466-PENTHOUSESI)
- [x] Criar tabela `constructions` (obras GB) associada a projetos
- [x] Criar tabela `mqtCategories` (categorias do MQT)
- [x] Criar tabela `mqtItems` (itens individuais do MQT com descrição PT+EN)
- [x] Criar relação Projeto (GA) ↔ Obra (GB)
- [x] Implementar server/constructionsDb.ts com funções de acesso ao banco
- [x] Implementar server/constructionsRouter.ts com APIs tRPC para CRUD de obras
- [x] Implementar APIs tRPC para gestão de MQT (categorias e itens)
- [x] Criar página Constructions.tsx para listagem de obras
- [x] Criar página ConstructionDetails.tsx com tabs (Dashboard, MQT, Fornecedores, Custos, Timeline)
- [x] Adicionar menu "Obras" no DashboardLayout
- [x] Popular 5 obras em curso:
  - [x] GB00433_Ourique
  - [x] GB00402_Maria Residences
  - [x] GB00462_Restelo
  - [x] GB00464_Apartment IG
  - [x] GA00466_Penthouse SI
- [x] Importar MQT da GB00466_Penthouse SI (18 itens: 13 Demolições + 5 Paredes Interiores)
- [ ] Implementar toggle "Mostrar EN" para descrições em inglês no MQT
- [ ] Extrair e importar restantes ~180+ itens do MQT (páginas 6-26 do PDF)
- [ ] Criar dashboard de custos (orçado vs real) no tab Custos
- [ ] Implementar gestão de fornecedores por item MQT
- [x] Testar módulo completo


## Toggle "Mostrar EN" no MQT
- [x] Adicionar estado showEnglish no componente ConstructionDetails
- [x] Criar botão toggle com ícone Languages no cabeçalho do tab MQT
- [x] Adicionar coluna Description (EN) à tabela MQT
- [x] Implementar lógica de ocultar/mostrar coluna EN baseado no estado
- [x] Adicionar animação suave na transição (React renderização condicional)
- [x] Aplicar design GAVINHO ao botão toggle (cores #C9A882 quando ativo)
- [x] Testar funcionalidade
